# ERAP Periodontal Analysis Outputs

Generated by the periodontal FDG-PET analysis pipeline.

## Directory Structure

### cross_sectional/
Single-timepoint metrics from `04_batch_quantify.py`:
- `tooth_level_metrics.csv` - Per-tooth SUV, TPR, FUR (all trimming variants)
- `jaw_level_metrics.csv` - Jaw-level aggregated metrics

### longitudinal/
Pre-post comparison from `06_longitudinal_delta.py`:
- `delta_summary.csv` - Per-subject delta metrics (Followup - Baseline)
- `ttest_results.csv` - Group-level one-sample t-tests

### statistical_analysis/
Statistical tests from `05_statistical_analysis.py`:
- `by_trimming/{0,3,5,8,10}mm/` - Results organized by tongue trimming level
  - `jaw_paired_tests.csv` - Paired t-tests on jaw-level metrics
  - `tooth_lmm_results.csv` - Linear mixed model results
  - `tooth_lmm_summary.txt` - LMM model summaries
  - `effect_sizes.csv` - Cohen's d effect sizes

### archive/
Obsolete files from deprecated analyses (kept for reference).

## Default Parameters
- Tongue trimming: 0mm (original tongue mask, no dilation)
- Smoothing FWHM: 3mm (longitudinal delta images)
- Reference space: Baseline PET (PET_A)

## Pipeline Scripts

| Script | Output Directory | Description |
|--------|------------------|-------------|
| `03_create_tongue_exclusion.py` | DerivedData/rois/ | Creates tongue exclusion masks |
| `04_batch_quantify.py` | cross_sectional/ | Extracts SUV, TPR, FUR metrics |
| `05_statistical_analysis.py` | statistical_analysis/ | Paired t-tests and LMM |
| `06_longitudinal_delta.py` | longitudinal/ | Pre-post delta analysis |

## Regenerating Outputs

To regenerate all outputs with default 0mm trimming:

```bash
cd Scripts/

# Step 1: Generate tongue exclusion masks (if needed)
python 03_create_tongue_exclusion.py --force

# Step 2: Extract cross-sectional metrics
python 04_batch_quantify.py --force

# Step 3: Run longitudinal delta analysis
python 06_longitudinal_delta.py --force --trimming 0mm

# Step 4: Run statistical analysis for all trimming levels
for trim in 0mm 3mm 5mm 8mm 10mm; do
  python 05_statistical_analysis.py --trimming $trim
done
```
